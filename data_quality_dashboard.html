<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data Quality Report — Financial Revenue Dataset</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  :root {
    --bg: #0a0c10;
    --surface: #111318;
    --border: #1e2230;
    --red: #ff3b5c;
    --amber: #ffb224;
    --green: #22d97a;
    --blue: #4d9fff;
    --purple: #a78bfa;
    --text: #e8eaf0;
    --muted: #6b7280;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'IBM Plex Mono', monospace;
    min-height: 100vh;
    padding: 40px 32px;
  }

  /* HEADER */
  .header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 48px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border);
  }
  .header-left h1 {
    font-family: 'Syne', sans-serif;
    font-size: 2.6rem;
    font-weight: 800;
    line-height: 1;
    letter-spacing: -1px;
    color: #fff;
  }
  .header-left p {
    margin-top: 8px;
    color: var(--muted);
    font-size: 0.78rem;
    letter-spacing: 0.04em;
  }
  .decision-badge {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: rgba(255,59,92,0.12);
    border: 1px solid var(--red);
    border-radius: 8px;
    padding: 12px 20px;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--red);
  }
  .decision-badge .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--red); animation: pulse 1.5s infinite; }
  @keyframes pulse { 0%,100% { opacity:1; transform:scale(1); } 50% { opacity:0.4; transform:scale(1.3); } }

  /* KPI ROW */
  .kpi-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 16px;
    margin-bottom: 32px;
  }
  .kpi {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    position: relative;
    overflow: hidden;
  }
  .kpi::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
  }
  .kpi.red::before { background: var(--red); }
  .kpi.amber::before { background: var(--amber); }
  .kpi.green::before { background: var(--green); }
  .kpi.blue::before { background: var(--blue); }
  .kpi.purple::before { background: var(--purple); }
  .kpi-label { font-size: 0.65rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; }
  .kpi-value { font-family: 'Syne', sans-serif; font-size: 2.4rem; font-weight: 800; line-height: 1; }
  .kpi.red .kpi-value { color: var(--red); }
  .kpi.amber .kpi-value { color: var(--amber); }
  .kpi.green .kpi-value { color: var(--green); }
  .kpi.blue .kpi-value { color: var(--blue); }
  .kpi.purple .kpi-value { color: var(--purple); }
  .kpi-sub { font-size: 0.7rem; color: var(--muted); margin-top: 4px; }

  /* GRID */
  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
  .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 20px; }
  .full { grid-column: 1 / -1; }

  /* CARD */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
  }
  .card-title {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.85rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .card-title .accent { width: 4px; height: 4px; border-radius: 50%; background: var(--blue); }

  canvas { max-height: 280px; }

  /* DIMENSION TABLE */
  .dim-table { width: 100%; border-collapse: collapse; }
  .dim-table th {
    font-size: 0.65rem; letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--muted); padding: 0 0 12px; text-align: left; border-bottom: 1px solid var(--border);
  }
  .dim-table td { padding: 12px 0; border-bottom: 1px solid var(--border); font-size: 0.82rem; vertical-align: middle; }
  .dim-table tr:last-child td { border-bottom: none; }
  .dim-name { font-family: 'Syne', sans-serif; font-weight: 600; color: #fff; }
  .pill {
    display: inline-block;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 600;
  }
  .pill.hard { background: rgba(255,59,92,0.15); color: var(--red); border: 1px solid rgba(255,59,92,0.3); }
  .pill.soft { background: rgba(255,178,36,0.12); color: var(--amber); border: 1px solid rgba(255,178,36,0.3); }
  .bar-wrap { width: 140px; }
  .bar-bg { background: var(--border); border-radius: 4px; height: 6px; overflow: hidden; }
  .bar-fill { height: 100%; border-radius: 4px; transition: width 1s ease; }

  /* ISSUES LIST */
  .issue-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
    font-size: 0.78rem;
    line-height: 1.5;
  }
  .issue-item:last-child { border-bottom: none; }
  .issue-icon { font-size: 1rem; flex-shrink: 0; margin-top: 1px; }
  .issue-company { font-family: 'Syne', sans-serif; font-weight: 600; color: #fff; }
  .issue-detail { color: var(--muted); }

  /* FOOTER */
  .footer {
    margin-top: 48px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    font-size: 0.68rem;
    color: var(--muted);
  }

  /* LEGEND */
  .legend { display: flex; gap: 16px; margin-top: 12px; flex-wrap: wrap; }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.72rem; color: var(--muted); }
  .legend-dot { width: 8px; height: 8px; border-radius: 50%; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="header-left">
    <h1>Data Quality Report</h1>
    <p>Financial Revenue Dataset · 372 rows × 10 columns · Run: 2026-02-24T14:41:58</p>
  </div>
  <div class="decision-badge">
    <div class="dot"></div>
    DATASET BLOCKED
  </div>
</div>

<!-- KPI ROW -->
<div class="kpi-row">
  <div class="kpi red">
    <div class="kpi-label">Hard Rejects</div>
    <div class="kpi-value">6</div>
    <div class="kpi-sub">Block ingestion</div>
  </div>
  <div class="kpi amber">
    <div class="kpi-label">Soft Flags</div>
    <div class="kpi-value">64</div>
    <div class="kpi-sub">Review required</div>
  </div>
  <div class="kpi blue">
    <div class="kpi-label">Total Issues</div>
    <div class="kpi-value">70</div>
    <div class="kpi-sub">Across 5 dimensions</div>
  </div>
  <div class="kpi purple">
    <div class="kpi-label">Rows Flagged</div>
    <div class="kpi-value">~180</div>
    <div class="kpi-sub">of 372 total</div>
  </div>
  <div class="kpi green">
    <div class="kpi-label">Revenue Null Rate</div>
    <div class="kpi-value">24.5%</div>
    <div class="kpi-sub">Threshold: 5%</div>
  </div>
</div>

<!-- ROW 1: Two charts -->
<div class="grid-2">
  <!-- Issue Severity Donut -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>Issue Severity Breakdown</div>
    <canvas id="severityChart"></canvas>
    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>Hard Reject (6)</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--amber)"></div>Soft Flag (64)</div>
    </div>
  </div>

  <!-- Issues by Dimension Bar -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>Issues by Quality Dimension</div>
    <canvas id="dimensionChart"></canvas>
  </div>
</div>

<!-- ROW 2: Three charts -->
<div class="grid-3">
  <!-- Completeness breakdown -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>Completeness Issues</div>
    <canvas id="completenessChart"></canvas>
  </div>

  <!-- LLM Verdicts -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>LLM Plausibility Verdicts</div>
    <canvas id="llmChart"></canvas>
  </div>

  <!-- YOY Spikes -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>Revenue Consistency Checks</div>
    <canvas id="consistencyChart"></canvas>
  </div>
</div>

<!-- ROW 3: Dimension table + top hard rejects -->
<div class="grid-2">
  <!-- Dimension breakdown table -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>Flagged Rows by Dimension</div>
    <table class="dim-table">
      <thead>
        <tr>
          <th>Dimension</th>
          <th>Check Types</th>
          <th>Rows Affected</th>
          <th style="width:150px">Coverage</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><span class="dim-name">Completeness</span></td>
          <td>5 checks</td>
          <td>~107</td>
          <td class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:72%; background:var(--blue)"></div></div></td>
        </tr>
        <tr>
          <td><span class="dim-name">Consistency</span></td>
          <td>YOY spikes, repeats, currency</td>
          <td>~60</td>
          <td class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:50%; background:var(--purple)"></div></div></td>
        </tr>
        <tr>
          <td><span class="dim-name">Plausibility</span></td>
          <td>LLM verdicts (GPT-4o-mini)</td>
          <td>~55</td>
          <td class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:46%; background:var(--amber)"></div></div></td>
        </tr>
        <tr>
          <td><span class="dim-name">Validity</span></td>
          <td>Negative revenue</td>
          <td>1</td>
          <td class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:4%; background:var(--green)"></div></div></td>
        </tr>
        <tr>
          <td><span class="dim-name">Uniqueness</span></td>
          <td>–</td>
          <td>0</td>
          <td class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:0%; background:var(--muted)"></div></div></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Hard Reject cases -->
  <div class="card">
    <div class="card-title"><span class="accent"></span>Hard Reject Cases</div>
    <div class="issue-item">
      <div class="issue-icon">⛔</div>
      <div>
        <div class="issue-company">Aditya Birla Fashion & Retail Ltd.</div>
        <div class="issue-detail">Identical revenue in 2020=2022 and 2021=2023 — likely extraction error → Re-extract</div>
      </div>
    </div>
    <div class="issue-item">
      <div class="issue-icon">⛔</div>
      <div>
        <div class="issue-company">PZ CUSSONS PLC</div>
        <div class="issue-detail">Identical revenue in 2019 and 2023 after a decline — not plausible → Re-extract</div>
      </div>
    </div>
    <div class="issue-item">
      <div class="issue-icon">⛔</div>
      <div>
        <div class="issue-company">Twentyfirst Century Mgmt. Services</div>
        <div class="issue-detail">Negative revenue in 2022 — implausible for active company → Re-extract</div>
      </div>
    </div>
    <div class="issue-item">
      <div class="issue-icon">⛔</div>
      <div>
        <div class="issue-company">AGF AS (Denmark)</div>
        <div class="issue-detail">Identical revenue in 2021 and 2024 — likely extraction error → Re-extract</div>
      </div>
    </div>
    <div class="issue-item">
      <div class="issue-icon">⛔</div>
      <div>
        <div class="issue-company">Andhra Cements Limited</div>
        <div class="issue-detail">+258,498% revenue spike 2020→2023 — extreme data error → Re-extract</div>
      </div>
    </div>
    <div class="issue-item">
      <div class="issue-icon">⛔</div>
      <div>
        <div class="issue-company">Completeness: Null Company Name</div>
        <div class="issue-detail">2 rows (idx 140, 141) have no companynameofficial → Hard block</div>
      </div>
    </div>
  </div>
</div>

<!-- ROW 4: Currency mismatches + YOY spike detail -->
<div class="grid-2">
  <div class="card">
    <div class="card-title"><span class="accent"></span>Currency / Country Mismatches</div>
    <canvas id="currencyChart"></canvas>
  </div>

  <div class="card">
    <div class="card-title"><span class="accent"></span>Largest Revenue YOY Spikes</div>
    <canvas id="spikeChart"></canvas>
  </div>
</div>

<div class="footer">
  <span>Data Quality Framework · 5 Dimensions: Completeness, Validity, Consistency, Uniqueness, Plausibility</span>
  <span>LLM: GPT-4o-mini · Threshold YOY: ±50%/yr · Revenue null cap: 5%</span>
</div>

<script>
Chart.defaults.color = '#6b7280';
Chart.defaults.font.family = "'IBM Plex Mono', monospace";
Chart.defaults.font.size = 11;

const gridColor = '#1e2230';

// 1. Severity Donut
new Chart(document.getElementById('severityChart'), {
  type: 'doughnut',
  data: {
    labels: ['Hard Reject', 'Soft Flag'],
    datasets: [{
      data: [6, 64],
      backgroundColor: ['rgba(255,59,92,0.8)', 'rgba(255,178,36,0.7)'],
      borderColor: ['#ff3b5c', '#ffb224'],
      borderWidth: 2,
      hoverOffset: 6
    }]
  },
  options: {
    responsive: true,
    cutout: '68%',
    plugins: {
      legend: { display: false },
      tooltip: {
        backgroundColor: '#111318',
        borderColor: '#1e2230',
        borderWidth: 1,
        callbacks: {
          label: (ctx) => ` ${ctx.label}: ${ctx.parsed} issues`
        }
      }
    }
  }
});

// 2. Dimension Bar
new Chart(document.getElementById('dimensionChart'), {
  type: 'bar',
  data: {
    labels: ['Completeness', 'Consistency', 'Plausibility', 'Validity', 'Uniqueness'],
    datasets: [{
      label: 'Issue Types',
      data: [6, 30, 17, 1, 0],
      backgroundColor: ['rgba(77,159,255,0.7)', 'rgba(167,139,250,0.7)', 'rgba(255,178,36,0.7)', 'rgba(34,217,122,0.7)', 'rgba(107,114,128,0.4)'],
      borderColor: ['#4d9fff','#a78bfa','#ffb224','#22d97a','#6b7280'],
      borderWidth: 1.5,
      borderRadius: 4,
    }]
  },
  options: {
    responsive: true,
    indexAxis: 'y',
    plugins: { legend: { display: false } },
    scales: {
      x: { grid: { color: gridColor }, ticks: { color: '#6b7280' } },
      y: { grid: { display: false }, ticks: { color: '#e8eaf0' } }
    }
  }
});

// 3. Completeness breakdown
new Chart(document.getElementById('completenessChart'), {
  type: 'bar',
  data: {
    labels: ['Active\nMissing Rev', 'Public\nMissing Rev', 'Unit w/o\nRevenue', 'Rev w/o\nUnit', 'Null\nCompany'],
    datasets: [{
      data: [91, 91, 14, 1, 2],
      backgroundColor: 'rgba(77,159,255,0.65)',
      borderColor: '#4d9fff',
      borderWidth: 1.5,
      borderRadius: 4
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display: false } },
    scales: {
      x: { grid: { display: false }, ticks: { color: '#6b7280', font: { size: 10 } } },
      y: { grid: { color: gridColor }, ticks: { color: '#6b7280' } }
    }
  }
});

// 4. LLM Verdicts
new Chart(document.getElementById('llmChart'), {
  type: 'doughnut',
  data: {
    labels: ['Likely Error', 'Suspicious', 'Plausible', 'Skipped Info'],
    datasets: [{
      data: [5, 8, 6, 1],
      backgroundColor: ['rgba(255,59,92,0.8)', 'rgba(255,178,36,0.7)', 'rgba(34,217,122,0.7)', 'rgba(107,114,128,0.5)'],
      borderColor: ['#ff3b5c','#ffb224','#22d97a','#6b7280'],
      borderWidth: 2,
      hoverOffset: 5
    }]
  },
  options: {
    responsive: true,
    cutout: '60%',
    plugins: {
      legend: { position: 'bottom', labels: { boxWidth: 10, padding: 14, color: '#6b7280' } },
      tooltip: {
        backgroundColor: '#111318', borderColor: '#1e2230', borderWidth: 1,
      }
    }
  }
});

// 5. Consistency checks
new Chart(document.getElementById('consistencyChart'), {
  type: 'bar',
  data: {
    labels: ['YOY Spikes', 'Exact Repeats', 'Currency\nMismatch', 'Zero Rev\n(Active)', 'Geo\nConflict'],
    datasets: [{
      data: [23, 5, 5, 1, 1],
      backgroundColor: 'rgba(167,139,250,0.65)',
      borderColor: '#a78bfa',
      borderWidth: 1.5,
      borderRadius: 4
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display: false } },
    scales: {
      x: { grid: { display: false }, ticks: { color: '#6b7280', font: { size: 10 } } },
      y: { grid: { color: gridColor }, ticks: { color: '#6b7280' } }
    }
  }
});

// 6. Currency Mismatches
new Chart(document.getElementById('currencyChart'), {
  type: 'bar',
  data: {
    labels: ['ROBINSON PLC\n(UK→EUR)', 'UNILEVER PLC\n(UK→EUR)', 'COATS GROUP\n(UK→USD)', '4IMPRINT\n(UK→USD)', '20 Microns\n(IN→DKK)', 'Aban Offshore\n(ID→INR)'],
    datasets: [{
      label: 'Expected vs Reported',
      data: [5, 4, 3, 4, 4, 4],
      backgroundColor: 'rgba(255,59,92,0.5)',
      borderColor: '#ff3b5c',
      borderWidth: 1.5,
      borderRadius: 4
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display: false },
      tooltip: { callbacks: { label: ctx => ` ${ctx.parsed.y} rows affected` } }
    },
    scales: {
      x: { grid: { display: false }, ticks: { color: '#6b7280', font: { size: 9 } } },
      y: { grid: { color: gridColor }, ticks: { color: '#6b7280' }, title: { display: true, text: 'Rows affected', color: '#6b7280' } }
    }
  }
});

// 7. Biggest YOY spikes
new Chart(document.getElementById('spikeChart'), {
  type: 'bar',
  data: {
    labels: ['Andhra Cements\n+258,498%', 'MPAC Group\n+884%', 'Caffyns PLC\n+687%', 'Henderson Trust\n+312%', "Young & Co\n+307%", '21stCen Mgmt\n+359%', 'Accuracy Shipping\n+120%'],
    datasets: [{
      data: [258498, 884, 687, 312, 307, 359, 120],
      backgroundColor: ctx => ctx.dataIndex === 0 ? 'rgba(255,59,92,0.8)' : 'rgba(255,178,36,0.65)',
      borderColor: ctx => ctx.dataIndex === 0 ? '#ff3b5c' : '#ffb224',
      borderWidth: 1.5,
      borderRadius: 4
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: { display: false },
      tooltip: { callbacks: { label: ctx => ` ${ctx.parsed.y.toLocaleString()}% change` } }
    },
    scales: {
      x: { grid: { display: false }, ticks: { color: '#6b7280', font: { size: 9 } } },
      y: {
        grid: { color: gridColor }, ticks: { color: '#6b7280' },
        type: 'logarithmic',
        title: { display: true, text: 'Change % (log scale)', color: '#6b7280' }
      }
    }
  }
});
</script>
</body>
</html>
